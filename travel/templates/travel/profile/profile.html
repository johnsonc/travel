{% extends "travel/base.html" %}
{% block travel_heading %}Travelogue for {{ profile.user.username }}{% endblock %}
{% block travel_content %}
    {% if profile.is_public %}
    {% with profile.history_details as history_details %}
    {% with history_details.history as history %}
    <div class="form-inline">
        <div class="form-group">
            <label for="id_filter">Show</label>
        </div>
        <div class="form-group">
            <select id="id_filter" class="filter_ctrl form-control input-sm">
                <option value="">-- All entries --</option>
                <option value="type-cn">Continents</option>
                <option value="type-co">Countries</option>
                <option value="type-st">States</option>
                <option value="type-ap">Airports</option>
                <option value="type-ct">Cities</option>
                <option value="type-np">National Parks</option>
                <option value="type-lm">Landmarks</option>
                <option value="type-wh">World Heritage sites</option>
            </select>
        </div>
        <div class="form-group">
            <label for="id_country">in</label>
        </div>
        <div class="form-group">
            {% with history_details.countries as co_filter %}
            <select id="id_country" class="filter_ctrl form-control input-sm">
                <option value="">-- All countries --</option> {% for co in co_filter %}
                <option value="co-{{ co.1}}">{{ co.0 }}</option>{% endfor %}
            </select>
            {% endwith %}
        </div>
        <div class="form-group">
            <span id="id_count"></span>
        </div>
    </div>
    <table id="history" class="table table-hover table-condensed table-striped">
        <thead>
            <tr>
                <th></th>
                <th class="col_type sort_desc">Type</th>
                <th class="col_name sort_desc">Name</th>
                <th class="col_recent sort_desc">Recent Visit</th>
                <th class="col_first sort_desc">First Visit</th>
                <th class="col_logs sort_desc">Logs</th>
                <th class="col_rating sort_desc">Rating</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
    {% endwith %}
    {% endwith %}
    {% else %}
    <p>
        <strong>{{ profile.user.username }}</strong> has chosen not to share any travel information
    </p>
    {% endif %}
{% endblock travel_content %}
{% block end_body %}
    <script type="text/javascript" charset="utf-8">
        (function() {
            var profile_history = {{ profile.history_json|safe }};
            Travelogue.initialize(
                profile_history,
                {'media_prefix': '{{ MEDIA_URL }}'}
            );
        })();
    </script>
{% endblock end_body %}