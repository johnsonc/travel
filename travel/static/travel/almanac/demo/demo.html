<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title></title>
    <!--[if IE]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link rel="stylesheet" href="../src/almanac.css" type="text/css">
    <style type="text/css" media="screen">
        body { font: 12px Helvetica, Verdana, Arial; }
        .special { background: #d3dd94;}
        .almanac.my-almanac .selector { background: #9aa16c; }
        .almanac.my-almanac table.month td .day-num { background-color: #9aa16c; }
        hr { 
            border: 0; height: 1px;
            background-image: linear-gradient(to right, rgba(0,0,0,0), rgba(0,0,0,0.75), rgba(0,0,0,0));
        }
    </style>
</head>
<body>
    <h1>Almanac Demo</h1>
    <h2>Static</h2>
    <div class="almanac" id="march">
        <div class="selector">
            <a href="#">&larr;</a>
            <select><option>March</option></select>
            <select><option>2015</option></select>
            <a href="#">&rarr;</a>
        </div>
        <div class="weekdays"><span>Su</span><span>Mo</span><span>Tu</span><span>We</span><span>Th</span><span>Fr</span><span>Sa</span></div>
        <div class="month">
            <div class="week">
                <div class="day"><span class="day-num" data-date="2015-03-01">1</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-02">2</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-03">3</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-04">4</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-05">5</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-06">6</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-07">7</span></div>
            </div>
            <div class="week">
                <div class="day"><span class="day-num" data-date="2015-03-08">8</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-09">9</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-10">10</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-11">11</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-12">12</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-13">13</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-14">14</span></div>
            </div>
            <div class="week">
                <div class="day"><span class="day-num" data-date="2015-03-15">15</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-16">16</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-17">17</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-18">18</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-19">19</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-20">20</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-21">21</span></div>
            </div>
            <div class="week">
                <div class="day"><span class="day-num" data-date="2015-03-22">22</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-23">23</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-24">24</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-25">25</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-26">26</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-27">27</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-28">28</span></div>
            </div>
            <div class="week">
                <div class="day"><span class="day-num" data-date="2015-03-29">29</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-30">30</span></div>
                <div class="day"><span class="day-num" data-date="2015-03-31">31</span></div>
                <div class="day other next"><span class="day-num" data-date="2015-04-01">1</span></div>
                <div class="day other next"><span class="day-num" data-date="2015-04-02">2</span></div>
                <div class="day other next"><span class="day-num" data-date="2015-04-02">3</span></div>
                <div class="day other next"><span class="day-num" data-date="2015-04-02">4</span></div>
            </div>
        </div>
    </div>
    <hr>
    
    <h2>Generated <button disabled="disabled" id="asdf">Generate</button></h2>
    
    <div class="example">
        <h3>Example 1</h3>
        <div class="almanac my-almanac" id="id_example1"></div>
        <p><input type="text" value="" id="output1"></p>
        <hr>
    </div>

    <div class="example">
        <h3>Example 2</h3>
        <div class="almanac-container my-almanac">
            <input type="text" value="" id="output2">
            <div class="almanac" id="id_example2" style="display:none"></div>
        </div>
        <hr>
    </div>
    
    <div class="example">
        <h3>Example 3</h3>
        <div class="almanac almanac-lg my-almanac" id="id_example3"></div>
        <p><input type="text" value="" id="output3"></p>
    </div>
    
    <script src="../src/almanac.js"></script>
    <script type="text/javascript" charset="utf-8">
        //window.onbeforeunload = function(evt) {
        //    var message = "Navigating away without saving will lose any unsaved changes.\n\nBe sure you saved your changes before leaving this page.";
        //    evt.returnValue = message;
        //    return message;
        //};
        
        var generate = function() {
            var el = document.getElementById('id_example1');
            var e3 = document.getElementById('id_example3');
            var today = new Date();
            var key = Almanac.Utils.iso_string(today);
            var special3_data = {};

            var special1 = function(el, cdt) {
                if(cdt.is_current && cdt.day % 7 == 0) {
                    el.className += ' special';
                }
            };
            
            var special3 = function(el, cdt) {
                var s = cdt.toISOString();
                var ul;
                if(cdt.is_current && (cdt.day % 7 == 0 || cdt.day % 3 == 0)) {
                    el.className += ' special';
                }
                if(special3_data.hasOwnProperty(s)) {
                    ul = Almanac.DOM.create('ul');
                    special3_data[s].forEach(function(txt) {
                        ul.appendChild(Almanac.DOM.create('li', txt));
                    });
                    el.appendChild(ul);
                }
            };

            Almanac.popout('id_example2', 'output2', {year_range: '-75', show_cancel: true});
            Almanac.initialize(el, {
                date: new Date(2015,3,1),
                day_post_create: special1,
                day_onclick: function() { document.getElementById('output1').value = this.dataset['date']; },
                year_range: '+10',
                tag: 'span',
                show_other_month_days: false
            });

            special3_data[key] = ['This is the title for event #1', 'Event #2', 'Event #3'];
            Almanac.initialize(e3, {
                day_post_create: special3,
                day_onclick: 'output3',
                year_range: '-25',
                month_tag: 'table',
                week_tag: 'tr',
                day_tag: 'td',
            });
        };
        
        document.getElementById('asdf').onclick = generate;
        generate();
    </script>
</body>
</html>